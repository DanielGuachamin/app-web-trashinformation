<div class="pantalla-news">
    <div class="fondo-news">
        <div class="mostrar-news">
            <div class="individual-news" *ngFor="let noticia of noticias">
                <mat-card class="example-card">
                    <mat-card-header>

                      <mat-card-title>{{noticia.title}}</mat-card-title>
                      <mat-card-subtitle>{{noticia.category}}</mat-card-subtitle>
                    </mat-card-header>
                    <img mat-card-image [src]="noticia.noticiaPic" alt={{noticia.title}} width="200" height="300">
                    <mat-card-content>
                      <p>
                        {{noticia.description}}
                      </p>
                    </mat-card-content>
                    <mat-card-actions>
                      <button mat-raised-button color="warn" (click)="deleteNoticiaById(noticia.id)">Eliminar</button>
                      <button mat-raised-button color="accent" (click)="fillFormNoticia(noticia.id)">Modificar</button>
                    </mat-card-actions>
                  </mat-card>
            </div>
        </div>
        <div class="formulario-news">
            <form [formGroup]="formNoticia" (ngSubmit)="onSubmitAddNoticia()" class="formulario-news">
                <mat-form-field appearance="fill">
                    <mat-label>Título</mat-label>
                    <input type="text" matInput placeholder="Ingrese un título" class="form-control" formControlName="title" >
                    <mat-error *ngIf="title.invalid && (title.dirty || title.touched)">{{getErrorMessageTitle()}}</mat-error>
                </mat-form-field>
                <mat-form-field appearance="fill">
                    <mat-label>Categoría</mat-label>
                    <mat-select class="form-control" formControlName="category">
                        <mat-option value="MedioAmbiente">Medio ambiente</mat-option>
                        <mat-option value="Orgánicos">Orgánicos</mat-option>
                        <mat-option value="Reciclaje">Reciclaje</mat-option>
                        <mat-option value="Covid19">Covid 19</mat-option>
                    </mat-select>
                    <mat-error *ngIf="category.invalid && (category.dirty || category.touched)">{{getErrorMessageCategory()}}</mat-error>
                </mat-form-field>
                <mat-form-field class="mt-3" appearance="fill">
                    <mat-label>Autor</mat-label>
                    <input type="text" matInput placeholder="Ingrese un autor" class="form-control" formControlName="author">
                    <mat-error *ngIf="author.invalid && (author.dirty || author.touched)">{{getErrorMessageAuthor()}}</mat-error>
                </mat-form-field>
                <mat-form-field appearance="fill">
                    <mat-label>Descripción</mat-label>
                    <textarea type="text" matInput matInput placeholder="Ingrese una descripción" class="form-control"
                    formControlName="description"></textarea>
                    <mat-error *ngIf="description.invalid && (description.dirty || description.touched)">{{getErrorMessageDescription()}}</mat-error>

                </mat-form-field>
                <mat-form-field class="mt-3" appearance="fill">
                    <mat-label>Fuente bibliográfica</mat-label>
                    <input type="text" matInput placeholder="Ingrese una referencia" class="form-control" formControlName="url">
                    <mat-error *ngIf="url.invalid && (url.dirty || url.touched)">{{getErrorMessageUrl()}}</mat-error>
                </mat-form-field>

                    <mat-icon class="mt-4">image</mat-icon>
                    <button type="button" mat-raised-button (click)="fileInput.click()">Agregar Imagen (Opcional)</button>
                    <input hidden (change)="uploadNoticiaImage($event)" #fileInput type="file">
                    <span class="file-name">{{selectedFile?.name}}</span>

                <button class="mt-2" mat-raised-button color="primary">Guardar</button>
            </form>
            <button class="mt-2" mat-raised-button color="primary" (click)="clearForm()">Limpiar Formulario</button>
        </div>

    </div>
</div>
